<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Standoff 2: Ultimate Web Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #0b141a; font-family: 'Arial', sans-serif; color: white; user-select: none; }
        
        /* –≠–∫—Ä–∞–Ω—ã –º–µ–Ω—é */
        .overlay { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; background: rgba(0,0,0,0.85); }
        .team-card { width: 280px; padding: 25px; margin: 15px; border-radius: 8px; cursor: pointer; text-align: center; font-weight: bold; border: 2px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .t-card { background: linear-gradient(45deg, #d35400, #e67e22); }
        .ct-card { background: linear-gradient(45deg, #2980b9, #3498db); }
        .team-card:hover { transform: scale(1.05); border-color: #fff; }

        /* –ò–≥—Ä–æ–≤–æ–π HUD */
        #hud { display: none; position: fixed; inset: 0; z-index: 100; pointer-events: none; }
        .top-stats { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); padding: 5px 25px; border-radius: 4px; display: flex; gap: 30px; font-size: 20px; border: 1px solid #444; }
        .money-tag { position: absolute; top: 110px; left: 20px; color: #2ecc71; font-size: 26px; font-weight: bold; text-shadow: 2px 2px #000; }
        .radar { position: absolute; top: 15px; left: 15px; width: 90px; height: 90px; border-radius: 50%; border: 2px solid #fff; background: rgba(0,0,0,0.3); }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-game { position: absolute; background: rgba(255,255,255,0.1); border: 1px solid #fff; border-radius: 50%; pointer-events: auto; display: flex; align-items: center; justify-content: center; }
        .shoot-btn { bottom: 50px; right: 50px; width: 100px; height: 100px; font-size: 40px; }
        .shop-btn { top: 160px; left: 20px; width: 50px; height: 50px; border-radius: 5px; font-weight: bold; }

        #shop-menu { display: none; background: rgba(0,0,0,0.9); }
    </style>
</head>
<body>

<div id="team-select" class="overlay">
    <h1 style="letter-spacing: 5px;">–í–´–ë–û–† –ö–û–ú–ê–ù–î–´</h1>
    <div class="team-card t-card" onclick="joinTeam('T')">–¢–ï–†–†–û–†–ò–°–¢–´<br><span id="t-count">0 / 5</span></div>
    <div class="team-card ct-card" onclick="joinTeam('CT')">–°–ü–ï–¶–ù–ê–ó<br><span id="ct-count">0 / 5</span></div>
</div>

<div id="shop-menu" class="overlay">
    <h2>–ú–ê–ì–ê–ó–ò–ù –°–ù–ê–†–Ø–ñ–ï–ù–ò–Ø</h2>
    <div class="team-card" style="background: #27ae60;" onclick="buy('AKR', 2700)">AKR - $2700</div>
    <div class="team-card" style="background: #27ae60;" onclick="buy('M4', 2900)">M4 - $2900</div>
    <div class="team-card" style="background: #c0392b;" onclick="toggleShop()">–ó–ê–ö–†–´–¢–¨</div>
</div>

<div id="hud">
    <div class="top-stats">
        <span id="score-ct" style="color: #3498db;">0</span>
        <span id="game-timer" style="color: #f1c40f;">02:00</span>
        <span id="score-t" style="color: #e67e22;">0</span>
    </div>
    <div class="radar"></div>
    <div class="money-tag" id="cash-val">$1000</div>
    <div class="btn-game shop-btn" onclick="toggleShop()">B</div>
    <div class="btn-game shoot-btn" onclick="doShoot()">üî•</div>
</div>

<script>
    let currentCash = 1000;
    let myTeam = "";
    let teams = { T: 2, CT: 3 }; // –§–µ–π–∫–æ–≤—ã–µ –±–æ—Ç—ã –¥–ª—è –±–∞–ª–∞–Ω—Å–∞

    // THREE.JS SETUP
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xd2b48c); // Sandstone
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    function joinTeam(side) {
        // –ò–º–±–æ–≤—ã–π –∞–≤—Ç–æ–±–∞–ª–∞–Ω—Å
        if (side === 'T' && teams.T >= 5) return alert("–ö–æ–º–∞–Ω–¥–∞ T –ø–æ–ª–Ω–∞!");
        if (side === 'CT' && teams.CT >= 5) return alert("–ö–æ–º–∞–Ω–¥–∞ CT –ø–æ–ª–Ω–∞!");
        
        myTeam = side;
        document.getElementById('team-select').style.display = 'none';
        document.getElementById('hud').style.display = 'block';
        document.body.appendChild(renderer.domElement);
        initWorld();
        animate();
    }

    function initWorld() {
        // –ü–æ–ª
        const floor = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), new THREE.MeshStandardMaterial({color: 0xbc9b6a}));
        floor.rotation.x = -Math.PI/2; scene.add(floor);
        
        // –°–≤–µ—Ç
        scene.add(new THREE.AmbientLight(0xffffff, 0.7));
        const sun = new THREE.DirectionalLight(0xffffff, 1); sun.position.set(10, 20, 10); scene.add(sun);

        // –û—Ä—É–∂–∏–µ (–ü–∏—Å—Ç–æ–ª–µ—Ç)
        const gun = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.15, 0.3), new THREE.MeshStandardMaterial({color: 0x222}));
        body.position.set(0.3, -0.2, -0.5);
        gun.add(body);
        camera.add(gun);
        scene.add(camera);
        camera.position.set(0, 1.7, 5);

        // –°–ø–∞–≤–Ω –±–æ—Ç–æ–≤
        for(let i=0; i<8; i++) spawnBot(Math.random()*20-10, -10 - (i*5), i % 2 == 0 ? 'T' : 'CT');
    }

    function spawnBot(x, z, side) {
        const bot = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(0.6, 1, 0.3), new THREE.MeshStandardMaterial({color: side === 'CT' ? 0x2980b9 : 0x5d4037}));
        if (side === 'CT') {
            const vest = new THREE.Mesh(new THREE.BoxGeometry(0.65, 0.7, 0.35), new THREE.MeshStandardMaterial({color: 0x111})); // SWAT
            const cap = new THREE.Mesh(new THREE.BoxGeometry(0.3, 0.05, 0.3), new THREE.MeshStandardMaterial({color: 0x2c3e50})); // –ö–µ–ø–∫–∞
            vest.position.y = 1.1; cap.position.set(0, 1.85, 0.1);
            bot.add(vest, cap);
        } else {
            const bandana = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.1, 0.4), new THREE.MeshStandardMaterial({color: 0xbc9b6a})); // –ë–∞–Ω–¥–∞–Ω–∞
            bandana.position.y = 1.75;
            bot.add(bandana);
        }
        body.position.y = 1; bot.add(body);
        bot.position.set(x, 0, z);
        scene.add(bot);
    }

    function doShoot() {
        // –û—Ç–¥–∞—á–∞ (–ò–º–±–æ–≤–∞—è —Ñ–∏—à–∫–∞)
        camera.rotation.x += 0.05;
        setTimeout(() => camera.rotation.x -= 0.05, 50);
        
        // –†–∞–Ω–¥–æ–º–Ω—ã–π –∫–∏–ª–ª –∏ –Ω–∞–≥—Ä–∞–¥–∞
        if(Math.random() > 0.7) {
            currentCash += 300;
            document.getElementById('cash-val').innerText = "$" + currentCash;
        }
    }

    function toggleShop() {
        const s = document.getElementById('shop-menu');
        s.style.display = s.style.display === 'flex' ? 'none' : 'flex';
    }

    function buy(item, price) {
        if(currentCash >= price) {
            currentCash -= price;
            document.getElementById('cash-val').innerText = "$" + currentCash;
            alert("–ö—É–ø–ª–µ–Ω–æ: " + item);
            toggleShop();
        } else alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!");
    }

    function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
    }
</script>
</body>
</html>
